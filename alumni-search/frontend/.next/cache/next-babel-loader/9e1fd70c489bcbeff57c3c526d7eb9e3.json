{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/MyLayout.js\";\nimport jsCookie from \"js-cookie\";\nimport { getInfo, getLoggedInfo, getNotLogged } from \"../lib/utils\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: '',\n      results: {\n        movie_name: [],\n        restaurant_type: [],\n        restaurant_name: [],\n        theater_name: []\n      }\n    }; //this.handleSearch();\n  }\n\n  handleUpdate(evt) {\n    this.setState({\n      search: evt.target.value\n    }, this.handleSearch);\n  }\n\n  async handleSearch(evt) {\n    //no user\n    if (jsCookie.get(\"screenname\") == undefined) {\n      const results = await getNotLogged(this.state.search);\n\n      if (results) {\n        this.setState({\n          results: results\n        });\n      } else {\n        this.setState({\n          results: {\n            movie_name: [],\n            restaurant_type: [],\n            restaurant_name: [],\n            theater_name: []\n          }\n        });\n      }\n    } else {\n      //with a user\n      const results = await getLoggedInfo(this.state.search, jsCookie.get(\"screenname\"));\n\n      if (results) {\n        this.setState({\n          results: results\n        });\n      } else {\n        this.setState({\n          results: {\n            movie_name: [],\n            restaurant_type: [],\n            restaurant_name: [],\n            theater_name: []\n          }\n        });\n      }\n    }\n  }\n\n  handleInput(evt) {\n    this.handleUpdate(evt);\n    this.handleSearch(evt);\n  }\n\n  render() {\n    const that = this;\n    return __jsx(Layout, {\n      style: {\n        margin: \"auto auto\",\n        width: \"600px\",\n        textAlign: \"center\"\n      }\n    }, __jsx(\"h2\", {\n      className: \"jsx-3329876545\"\n    }, \"Start Searching Your Community!\"), __jsx(\"input\", {\n      type: \"text\",\n      value: this.state.search,\n      onChange: this.handleInput.bind(that),\n      className: \"jsx-3329876545\" + \" \" + \"text-style\"\n    }), __jsx(\"br\", {\n      className: \"jsx-3329876545\"\n    }), __jsx(\"br\", {\n      className: \"jsx-3329876545\"\n    }), __jsx(\"br\", {\n      className: \"jsx-3329876545\"\n    }), \" \", __jsx(\"br\", {\n      className: \"jsx-3329876545\"\n    }), this.state.results.restaurant_type.length > 0 && this.state.search !== '' ? __jsx(\"table\", {\n      id: \"entries\",\n      className: \"jsx-3329876545\"\n    }, __jsx(\"tbody\", {\n      className: \"jsx-3329876545\"\n    }, this.state.results.restaurant_type.map(function (item, key) {\n      return __jsx(\"tr\", {\n        key: key,\n        className: \"jsx-3329876545\"\n      }, __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.name), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.restaurant_type), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.address), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.city), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.zip));\n    }))) : null, this.state.results.restaurant_name.length > 0 && this.state.search !== '' ? __jsx(\"table\", {\n      id: \"entries\",\n      className: \"jsx-3329876545\"\n    }, __jsx(\"tbody\", {\n      className: \"jsx-3329876545\"\n    }, this.state.results.restaurant_name.map(function (item, key) {\n      return __jsx(\"tr\", {\n        key: key,\n        className: \"jsx-3329876545\"\n      }, __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.name), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.restaurant_type), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.address), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.city), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.zip));\n    }))) : null, this.state.results.movie_name.length > 0 && this.state.search !== '' ? __jsx(\"table\", {\n      id: \"entries\",\n      className: \"jsx-3329876545\"\n    }, __jsx(\"tbody\", {\n      className: \"jsx-3329876545\"\n    }, this.state.results.movie_name.map(function (item, key) {\n      return __jsx(\"tr\", {\n        key: key,\n        className: \"jsx-3329876545\"\n      }, __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.movie), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.theater), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.address), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.city), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.zip));\n    }))) : null, this.state.results.theater_name.length > 0 && this.state.search !== '' ? __jsx(\"table\", {\n      id: \"entries\",\n      className: \"jsx-3329876545\"\n    }, __jsx(\"tbody\", {\n      className: \"jsx-3329876545\"\n    }, this.state.results.theater_name.map(function (item, key) {\n      return __jsx(\"tr\", {\n        key: key,\n        className: \"jsx-3329876545\"\n      }, __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.movie), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.theater), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.address), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.city), __jsx(\"td\", {\n        className: \"jsx-3329876545\"\n      }, item.zip));\n    }))) : null, __jsx(_JSXStyle, {\n      id: \"3329876545\"\n    }, [\"h1.jsx-3329876545,h2.jsx-3329876545,h3.jsx-3329876545,h4.jsx-3329876545,a.jsx-3329876545,td.jsx-3329876545,p.jsx-3329876545{color:#1f618d;font-family:\\\"Arial\\\";}\", \".button-style.jsx-3329876545{margin:auto auto;cursor:pointer;background-color:#228b22;color:#ffffff;width:100px;font-family:\\\"Arial\\\";}\", \".text-style.jsx-3329876545{margin:auto auto;width:200px;}\", \"input.jsx-3329876545{margin:auto auto;width:200px;}\", \".description.jsx-3329876545{font-family:\\\"Arial\\\";font-size:\\\"10px\\\";}\", \"ul.jsx-3329876545{padding:0;}\", \"li.jsx-3329876545{list-style:none;margin:5px 0;}\", \"a.jsx-3329876545{-webkit-text-decoration:none;text-decoration:none;color:blue;}\", \"a.jsx-3329876545:hover{opacity:0.6;}\", \"table.jsx-3329876545{color:#333;font-family:Helvetica,Arial,sans-serif;width:100%;border-collapse: collapse;border-spacing:0;}\", \"td.jsx-3329876545,th.jsx-3329876545{border:1px solid #CCC;height:30px;}\", \"th.jsx-3329876545{background:#F3F3F3;font-weight:bold;}\", \"td.jsx-3329876545{background:#FAFAFA;text-align:center;}\"]));\n  }\n\n}\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}